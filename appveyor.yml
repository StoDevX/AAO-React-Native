shallow_clone: true
clone_folder: c:\projects\all-about-olaf

# From http://stackoverflow.com/a/31882307/2347774
# Hopefully prevent appveyor from building twice for PRs
branches:
  only:
    - master

# the basic outline for this install process is from
# github.com/googlesamples/android-ndk/blob/master/appveyor.yml
init:
  - choco install android-sdk -version 24.4.1.3

install:
  # install android-sdk
  - echo y | "%ANDROID_HOME%\tools\android.bat" --silent update sdk --no-ui --all --filter android-23
  - echo y | "%ANDROID_HOME%\tools\android.bat" --silent update sdk --no-ui --all --filter build-tools-23.0.1
  - echo y | "%ANDROID_HOME%\tools\android.bat" --silent update sdk --no-ui --all --filter extra-google-m2repository
  - echo y | "%ANDROID_HOME%\tools\android.bat" --silent update sdk --no-ui --all --filter extra-android-m2repository
  - echo y | "%ANDROID_HOME%\tools\android.bat" --silent update sdk --no-ui --all --filter extra-android-support
  # install node and npm packages
  - ps: Install-Product node $env:nodejs_version
  # switch to yarn for faster install times
  - yarn

environment:
  nodejs_version: '7'
  JAVA_HOME: C:\Program Files\Java\jdk1.8.0
  matrix:
    - TEST_TYPE: android

# Post-install test scripts.
test_script:
  - node --version
  - yarn -V

build_script: 'yarn run build:android:win'

notifications:
  - provider: Slack
    incoming_webhook:
      secure: FAKVymf5kPEMsOf2Brk5VWIeylmsG6oCXBBURcN3S2RTSKGvLV/qEiN1m2HWU+OxGlnMZcBR7UjB2hsOw6S/Ri81KDzgpuTWcYH9FOobXWU=
