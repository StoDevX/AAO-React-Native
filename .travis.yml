env:
  # To update the secure tokens, run `travis encrypt NAME='VALUE' --add` after
  # installing the travis gem with `gem install travis`.
  global:
    # `match` keychain info â€“ the values don't matter, they're defined
    # here so they're consistent throughout
    - MATCH_KEYCHAIN_NAME=travis-ios-keychain
    - MATCH_KEYCHAIN_PASSWORD=alpine
    # dirty hack for https://github.com/travis-ci/travis-ci/issues/5092
    - PATH=${PATH/\.\/node_modules\/\.bin/}
    # sets our node version in one nice place
    - TRAVIS_NODE_VERSION=8
    # set the ruby version up top
    - TRAVIS_RUBY_VERSION=ruby-2.4.2
    # GH_TOKEN:
    # - used by greenkeeper to update package-lock.json
    - secure: s2HicpDrioxVuS/1KyDMgFkgbM3eVxp1FVF1R922oKeUGhtNFERufXp+nXaG98trqmJhfjfx243i7qP8oEX1DoGtFAHAuILBG0KTXoY1HZG/ZlVpc2pjRQmfCt3tJCs8Trovv2q2yM21JtTKXJ6wZ+XUGK0zqXbd4IH7k30Q649CIZ+l/pcU4cVqoLojekFWMQuW9onPOiTGtBckdPngmJ9GgAGDQesYjZ/p5RTaggCleD4oFmgkUdPZtityr+6TYe6cU9fFIVHyxe5F4JsiXB2aKk0qbX86tXUdlneOTYAw0YsxzVbpjtjVeedG3lm+UDAABznaqyuj4EI2+ERIXEMXtDzG+knQuQIF1P9E5ZWRanuSbfwFRJecPXyw03AtT+lBEHls1klRFep0yYzSKPunuqyeFZG+QFFtiegPnk7C4R2KfJhghB8kr8Ysgwg1YJXP77AaTBET0YsEvhMNNqEGK0LsXhZJUCWUnZfINFwp8ggEB8ZHWqWmTD2SxufqWXCzcMBnNdyuoDAH8//myA/09UcxzRpQwBqy3wH/Nlb47n+RydQxxiSmpTw0xAa5f9/qRjy0DrIT0PowDN1VGLgy6wQIqzAN6Ex4Y7AIyaTZrga7cbpfHE7lKee8XTTfDJnfGywJ1+3CqpZpA1jQhRzeGQbxPfghaOxzI46i4p4=


# As seen in http://stackoverflow.com/a/31882307/2347774
# Prevent travis from building twice for PRs
branches:
  only:
    - master
    - /^travis/
    - /^greenkeeper\//
    - /^v?(?:0|[1-9]\d*)\.(?:0|[1-9]\d*)\.(?:0|[1-9]\d*)(?:-[\da-z\-]+(?:\.[\da-z\-]+)*)?(?:\+[\da-z\-]+(?:\.[\da-z\-]+)*)?$/


stages:
  - name: Greenkeeper


#
# Definitions of dictionaries that are used by the machines below
#

x-definitions:
  - &simplejs
    os: linux
    sudo: false
    distro: trusty
    language: node_js
    node_js: $TRAVIS_NODE_VERSION


jobs:
  # We define default before_install, install, and before_script steps.
  # To skip the default step, use `step_name: skip`.
  include:
    # Run greenkeeper stuff
    - <<: *simplejs
      stage: Greenkeeper
      env: [task=GREENKEEPER]
      install: npm install -g greenkeeper-lockfile@1
      before_script: mkdir -p logs/
      script: greenkeeper-lockfile-update
      after_script:
        - greenkeeper-lockfile-upload
        - npm run danger -- --id $task

cache:
  bundler: true
  yarn: true
  directories:
    - $HOME/.gradle
    - $HOME/.gradle/wrapper/
    - $HOME/.android/build-cache
